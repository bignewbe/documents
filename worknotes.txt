1. errors:
    unexpected end of file -> converted windows file to linux: tr -d '\015' <DOS-file >UNIX-file

3. SQL
   a) SELECT s.ID, s.Symbol, i.IndustryID FROM Test.dbo.Stock_financials as s,
      Test.dbo.Industry_financials as i
      where s.pc1w > i.pc1w AND s.pc4w > i.pc4w AND s.pc1w > i.pc1w AND s.IndustryID=i.IndustryID

   b) SELECT s.ID, s.Symbol, i.IndustryID, a.MRC FROM Test.dbo.Stock_financials as s,
      Test.dbo.Industry_financials as i,
	  Test.dbo.Stock_analyst as a
      WHERE s.SMRQv1Y > i.SMRQv1Y AND s.SMRQv1Y > 0
	  AND s.STTMv1Y > i.STTMv1Y AND s.STTMv1Y > 0
	  AND s.S5YGR > i.S5YGR AND s.S5YGR > 0
	  AND s.EPSv1YMRQ > i.EPSv1YMRQ
	  AND s.EPSv1YTTM > i.EPSv1YTTM
	  AND s.EPS5YGR > i.EPS5YGR
	  AND a.EPSEQC1 > a.EPSEQ2M1 AND a.EPSEQC1 > 0
	  AND s.PETTM < i.PETTM AND s.P2FCFTTM < i.P2FCFTTM
	  AND s.IndustryID = i.IndustryID
	  AND s.Symbol = a.Symbol
	  
	  //Select the IndustryID for a stock
	  SELECT s.Symbol, p.IndustryID from Test.dbo.Stock_financials as s,
      Test.dbo.Stock_priceChange as p
      WHERE s.Symbol = 'ASML' AND s.IndustryID = p.IndustryID AND p.Symbol like 'Ind%'
	  
//sort the industry price performance 
SELECT p.IndustryID, p.NumStock, p.pc1w, p.pc4w, p.pc13w, p.pc26w, p.pc52w, p.pcYTD from
      Test.dbo.Stock_priceChange as p
      WHERE p.Symbol like 'Ind%'
	  ORDER BY pc52w DESC

//select all stocks in a particualr industry
SELECT s.Symbol from Test.dbo.Stock_financials as s
      WHERE s.IndustryID = 93

4. The Datetime format have to be set to M/D/yyyy to make the code work! 

SELECT p.Bid, p.DateSelected, p.IndustryID, p.SectorID, p.Symbol, p.Shape, p.DateBuy, p.DateSell, p.StopLoss, p.PriceBuy, p.PriceSell, p.Gain, p.Hold, 
       p.Len, p.Gain7, p.Gain14, p.Gain30, p.Gain60, p.GainMax, p.HoldMax from
      Test.dbo.TradedStocks as p
      --WHERE --p.Shape like '%up4'--AND
	  --p.Gain <> -1 
	  --AND p.Bid = 3 
	  --p.Bid = 2
	  --AND p.Gain7 > 8
	  --p.Hold = 1 -- AND p.Gain7 > 0
	  --p.Symbol = 'PRGX'
	  ORDER BY p.Gain ASC
	  
5) C# reference type: assignment and pass by value = copy of object address
   C# reference type: pass by reference = pointer to pointer to object
   
6) windows 7 activation
   a) run "slui.exe 4" and you will get 9 strings of 5-digit numbers
   b) once activation code (win7): 046070 - 538090 - 063216 - 774336 - 387512 - 786300 - 301212 - 033196
   c) win8 activation code: 089522 313585 021476 161310 223104 040450 283321 727982 
   
7) C# out of memory error
   a) it seems that allocating memory in main thread reduces the chance to have the error
   b) run "CorFlags.exe assembly" in VS command prompt to show the assembly info such as if it is a 64 bit application etc.

8) C# dictionary: we cannot remove item from a dict in foreach loop

9) C# culture invariant impacts "str to number" conversion. we must make sure each thread uses the same 

10) C# how to implement event in event publisher
   a) declare event handler: "event EventHandler PreDrawEvent" => needed internally to store customer's event handler
   b) implement "add" and "remove" event publisher (function) => here the customer's event handler is assigned to or removed from the above declared event handler
   c) use the internal event handler 

11) install Xwin server for Cygwin  => select Xinit in cygwin installer
12) change Cygwin HOME directory => edit the HOME in environment variable
13) Interactive Broker API: https://www.interactivebrokers.com/en/software/api/api.htm
14) ActiveX: 
    a) Microsoft technology to build COM object that can be inserted into website using "OBJECT"
	b) VC++ is normally used to develop the ActiveX control; follow the Wizard

15) TradeKing application 
Description:	help myself to place/cancel orders more easily
Owner:	bignewbe
Email:	imliping@gmail.com
Phone:	31621464236
Consumer Key:	YhBBwM1ZOvvlwxeIDZmys6ny8FxQfgMJxI9mkFNS  
Consumer Secret:	J2SKjQnnqykcDawnatmGwJdxPoNsVJrD9JNaNA0l  
OAuth Token:	G3wz3ZN1q1aC0H2Tc3zhSZVaYa1F2M7U4t465FP8  
OAuth Token Secret:	LYbAbv8kChKDlrkxpmyCtLLSrknp3A1KkWQrgFds 	

16) to start a driver manually in windows: 
   a) Run a cmd.exe as administrator and run the command "sc start npf". here the driver is "npf"

17) Yahoo real time stock quote API: 

18) windows run BBB.exe as administrator: 
    a) runas /profile /user:AAA “C:\programs\BBB.exe”  and press “Enter”
	b) type the password for user AAA

19) check if UDP port 1434 on SQL server "ping-PC" is responsive:
    a) PortQry.exe -n ping-PC -p UDP -e 1434
	b) UDP port 1434 is used to enquire about the server configuration via SQL server browser, which must be active in services. 

20) C# properties vs fields
    a) properties provides an additional layer of protection of the class data (e.g. we can easily change the boundary later on via get and set)
	b) additional method codes are added automatically by complier for the get and set functions

21) C# attributes
    a) it is class derived from Attributes
	b) it inserted data into the assembly metadata (CIL code) that can be queried using reflection
	c) Obsolete, Service, TestMethod, etc.

22) C# JSON serialize => serialize object into Json
    var json = new JavaScriptSerializer().Serialize(dic);
    var nDic = new JavaScriptSerializer().Deserialize(json, typeof(Dictionary<string, object>));
    Console.WriteLine(json);

23) Windows 7 get SID (Security Identifier):
   run: ~]$: wmic useraccount get name,sid
    Name           SID
    Administrator  S-1-5-21-1979610183-232468902-3886218441-500
    Guest          S-1-5-21-1979610183-232468902-3886218441-501
    ping           S-1-5-21-1979610183-232468902-3886218441-1000

24) Windows change file permission denied: (file, permission, security, properties, SID)
   a) run cmd as administrator
   b) run "TAKEOWN -F directory /R" => this will reset the ownership of the directory to currently logon user; /R make it recursive
   c) run "icacls directory/ /t /grant Everyone:F" => this will grant Full control to Everyone; /t make it recursive
   d) go to file explorer and set the file property as you want
   f) "getfacl file" and "icacls file" can also be used to get user/group/security info about a file/folder
   
25) Windows change services and starup programs
   a) run msconfig.exe

26) Option: 
   a) buy Call: right to purchase stocks in a given period at a fixed strike price. Profit when stock price rises above the strike price + premium. 
   b) sell Call: obligation to sell stocks in a given period at a fixed strike price. Profit = premium when stock price fall below the strike price, because in this
                 case, the option holder will not excercise the option.
   c) buy Put:   right to sell stocks
   d) sell Put:  obligation to buy stocks

27) install IronPython module:
   a) install ironpkg by running in cmd with admin: "ipy ironpkg-1.0.0.py --install"
   a) enter program files (x86)/ironpython
   b) type "ironpkg packname (e.g scipy)"

28) show environment variable in windows cmd:
   a) "set P" will show all variables started with 'P'
   
29) install python package using easy_install
   a) easy_install: install easy_install by downloading ez_install.py and run it; run 'easy_install package'
   b) pip: download pip-Win_1.6.exe for windows and run it; pip search package => pip install package
   c) the best way: find exe installer from http://www.lfd.uci.edu/~gohlke/pythonlibs/
   
30) Visual studio Compile Debug and Release with different DLL   
   a) edit csproj project file and set the condition for the ItemGroup containing references:
         <ItemGroup Condition="'$(Configuration)' == 'Debug'">
         <Reference Include="MyLib">
         <HintPath>..\..\Debug\MyLib.dll</HintPath>
          </Reference>
         </ItemGroup>

         <ItemGroup Condition="'$(Configuration)' == 'Release'">
         <Reference Include="MyLib">
         <HintPath>..\..\Release\MyLib.dll</HintPath>
         </Reference>
         </ItemGroup>

31) Visual studio Snippet
   a) create an snippet file
   b) open Tools -> Snippet Manager
   c) import from the Snippet file
   
32) Change to IP API
   a) Add property IsConnected to ClientSocket
   b) Add OnConnectionChange event to ClientSocket
   c) Mark Order and OrderComboLeg as serializable
   
33) Update chart (invoke) freezes the GUI
   a) Cause: updating should be done in a separate thread in order to let the Form to respond to invoke. Otherwise, dead lock occurs. 



1)    find . -name core -type f -print0 | xargs -0 /bin/rm -f
      Find  files named core in or below the current directory and delete them, processing filenames in such a way that file or directory names containing spaces or newlines are correctly handled.


2)    find . -name "*.cpp" -o -name "*.h" | xargs grep -liwC 1 "spiht.h"
      sed '/.*Default.*:.*/ d'
      sed 's/Default.*Path/Default/g'


3)    find . -name "*.hh" -o -name "*.cpp" -o -name "*.cc" -o -name "*.[cChH]" | xargs etags --m --declarations --ignore-indentation

4) #expand a file to specific size; add space to end of the file

dd if=STF_0822.JPG of=s.img bs=1024 skip=0 seek=500

dd if=s.img of=ss.img bs=1024 skip=500 seek=0

dd if=/dev/null of=ss.img bs=1024 skip=0 seek=10000 count=0

dd if=ss.img of=sss.img bs=1024 skip=0 seek=0 count=1404


5) #mount ntfs img 
 mount -o loop=,offset=32256 /home/liping/hd.img /windows/


6) #mount qemu windows partition
mount -o loop=,offset=32256 /dev/sda1 /windows

7) rsync -avzt --force --delete --delete-excluded --exclude=hd.img --exclude=download/ --exclude=bkp/ --exclude=tmp/ --exclude=temp/ --exclude=sequence/ /home/liping/ liping@131.155.26.30:~/bkp/mbs-pc50/linux/
   rsync -av --delete --delete-excluded --chmod=ugo=rwX Lib /cygdrive/z/
   let cgwin rsync use windows perssion: https://stackoverflow.com/questions/5798807/rsync-on-windows-wrong-permissions-for-created-directories
   - Try adding the 'noacl' flag to your Cygwin mounts in C:\cygwin\etc\fsta: none /cygdrive cygdrive user,noacl,posix=0 0 0
   - or You can pass custom permissions via rsync using the 'chmod' option: rsync -rvz --chmod=ugo=rwX -e ssh source destination
   protocol version mismatch — is your shell clean? => https://serverfault.com/questions/267154/protocol-version-mismatch-is-your-shell-clean
   - reason is that .bashrc generate output by echo, ssh tried to run that as a command which result in error 

8) tar xvf *.tar.bz2

9) mknod /dev/kqemu c 250 0
chmod 666 /dev/kqemu
/sbin/modprobe kqemu

10) #mount remote filesystem
shfsmount liping@131.155.26.30:/home/liping/bkp /mnt/remote/
shfsmount liping@131.155.26.30:/home/archive    /mnt/remote/

11) #create qemu image

qemu-img create -f qcow w2k.img 20G


12) #run qemu install w2k
nice -15 qemu -boot d -cdrom /dev/cdrom -hda /mnt/sda1/w2k.img -enable-audio

13) #cvs import project to cvs repository
 cvs import -m "<import_comment>" <module_name> <tag> start
 cvs import -m "Echo added to repository" stock/stock_analysis stock start
 cvs checkout <module>
 cvs update: update the files in the local directory to the status of repository 
 cvs commit: commit the changes to the repository 
 cvs remove <filename>
 cvs add <filename>



14)#boot from cdrom
 qemu -boot d -cdrom /dev/cdrom -hda /home/liping/hd.img
 
 qemu -boot c -hda /mnt/sda1/hd.img -user-net -cdrom /dev/cdrom -m 256 -enable-audio

15) #locate "fonts" that doesnt contain ". -" and "share"
locate fonts | grep -v "[.-]" | grep -v "share"


16)  find /tmp -name core -type f -print0 | xargs -0 /bin/rm -f
    # Find  files named core in or below the directory /tmp and delete them, processing filenames in such a way that file or directory names containing spaces or newlines are correctly handled.
	
     find . 2>nul | grep dependency.json	=> suppress warning message

17) find . -name "*.cpp" -o -name "*.h" | xargs grep -liwC 1 "spiht.h"

18) #etags
   find . -name "*.hh" -o -name "*.cpp" -o -name "*.cc" -o -name "*.[cChH]" | xargs etags --m --declarations --ignore-indentation

19) #compiling the programm using libvideogfx
 g++ -g -o -O00 exam main.cc `libvideogfx-config --cflags --libs`


20) make uninstall #uninstall the package
    make distclean #remove the compiled files

21) #format of the argument using the Unified loader
 /home/liping/liping/work/viewfile input.avi:start:25:length:50:quarter:crop:10:50:10:50

#macro in .
=stefen  dir/**.avi agument

22) #compile the source disabling optimization and enable debug

    LDFLAGS="-g"  CXXFLAGS="-O0 -g" ./configure --enable-debug --includedir=/usr/X11R6/include:/home/liping/include:/usr/include

23) #/etc/ld.so.conf

when run 'ldconfig', all the lib paths in the conf file are searched. the SONAME of the searched libs are written into ld.so.cache

24) #Create a shared library: 

        gcc -fPIC -c foo.c bar.c 
        gcc -shared -o libFooBar.so.1.2 -Wl,-soname="libFooBar.so.1" foo.o bar.o 
        gcc -o your_app main.o -L. -lFooBar 

    (Replace "gcc" with "g++" if it's a C++ lib you're building.) 

25) #Create a static library (or "archive"): 

        ar -r libFooBar.a foo.o bar.o 
        gcc -o your_app main.o libFooBar.a 


26) ls | grep -v ".tex" | xargs rm
    #delete all the files in current directory, whose file names do not contain ".tex"

27) # assign the version numbers of all files in cvs 
    cvs commit -r 3.0
    # tag the file
    cvs tag rel-1-0 back.cpp
    # tag all files
    cvs tag rel-1-0 . 
    # checkout specific version
    cvs checkout -r rel-1-0 back.cpp
    # move the tag 'harris-rel-1-0' of 'mian_harris.cpp' from old version to v1.6
    cvs tag -r 1.6 -F harris-rel-1-0 main_harris.cpp    
    # delete the tag
    cvs tag -d rel-1-0 test.cpp
    # add a new tag 'rel-2-0'
    cvs tag -r rel-1-0 rel-2-0 test.cpp
    #remote cvs server
    cvs -d :ext:liping@131.155.26.30:/home/liping/cvsroot co stock

# checkout version 'harris-rel-1-0' from module 'linux_src'
cvs co -r harris-rel-1-0 linux_src/.
cd linux_src
cvs co -r harris-rel-1-0 .

28) #list the module in the memory
    lsmod

29) # load the module into memory 
    modprobe nvidia
or add the module to /etc/modules

30) # Dirk read image
  a) Grey scale image: file_mxn.grey
  b) YUV image: file_mxn.yuv
  c) read multiple images: Setinput ("pic%03d.jpg")



31) file script: changing file extenstion
echo
echo "chaging all files in diretory: " $1 
echo "with extension: " $2 
echo "to extension:" $3
echo

if [ -d $1 ]; then
    echo $1;
    cd $1;
    path=`pwd`;
    echo $path;
    for dfile in *$2; do	
	if [ -f $dfile ]; then
	    fname=${dfile#$path/} # parameter expansion used to get filename without path
	    echo $fname;
	    name=`basename $fname $2`
	    echo $name$3;
	    mv $fname $name$3
	fi
    done
    cd -;
fi

echo 
echo "done!"
echo

32) C++: 
error: 'const clRect' as 'this' argument of 'bool clRect::Check_in_rect(T, T) [with T = int]' discards qualifiers
solution: add 'const' to the end of the function decalaration


33) #compress a directory using tar
tar -cvzf rate_control_h264.tar.gz --exclude '*.OPJ' --exclude '*.dat' --exclude '*.txt' rate_control_h264/


34) #find all the files in current directory whose size is over 10M, write the file names in 'big.txt'
    find . -size +10M -fprintf big.txt '%-10s %p\n'

35) Create a dynamic library

 a. create the object file:  g++ -fPIC -g -c -Wall matrix.cpp  -I../inc/ -I/usr/X11R6/include -I/home/liping/sys/include -I/usr/include -I/home/liping/sys/StatPack -I/usr/lib/glib-2.0/include/  -I/usr/include/glib-2.0/ -L/home/liping/sys/lib -lvideogfx -ljpeg -lpng -lz -lm -L/usr/X11R6/lib -lXext -lX11 -lXv -L/usr/lib -lgsl -lgslcblas -lm  -L/home/liping/sys/StatPack -lStatPack -L/usr/lib -lgts -lglib-2.0

 b. link the object files: g++ -shared -Wl,-soname,libmatrix.so.1 -o libmatrix.so.1.0.1 matrix.o general.o -lc

 c. update the /etc/lib.so.cache by runing: ldconfig -n directory_with_shared_libraries

 d. can also be used by setting the LD_LIBRARY_PATH or by -L 


36) #create static library: 

      ar rcs my_library.a file1.o file2.o

37) #to check the functions available in a library
    nm libmatrix.a

38) #CVS
    cvs update -r branch #update to branch
    cvs update -A        #update to the main branch
    cvs update -j branch #merge the branch into the main branch; make sure main branch is in the current directory
    cvs tag release      #tag all the files in curent status to release
    cvs co -r release module #check out the module of release    
    cvs tag -r 1.6 -F harris-rel-1-0 main_harris.cpp     #move the tag 'harris-rel-1-0' of 'mian_harris.cpp' from old version to v1.6
    cvs tag -d rel-1-0 test.cpp                          #delete the tag
    cvs tag -r rel-1-0 rel-2-0 test.cpp                  #add a new tag 'rel-2-0'

         $ cvs tag -b EXPR1              #create a branch EXPR1
         $ cvs update -r EXPR1           #move the working directory to brach EXPR1
         $ cvs commit                    #commit the working directory to repository
    
    cvs admin -kb filename               #make the file binary so that no merge will happen


39) #remove all the word in the file

    sed '/.*Default.*:.*/ d'
    sed 's/Default.*Path/Default/g'

    sed 's/[a-zA-Z]*//g' <f1 >f2
    #remve all words starting with ":", "!" or "="
    sed 's/[:!=]*//g'    <f1 >f2

    #Deleting all lines that start with a "#" is easy: 
    sed '/^#/ d' 

    #Removing comments and blank lines takes two commands. The first removes every character from the "#" to the end of the line, and the second deletes all blank lines: 
    sed -e 's/#.*//' -e '/^$/ d' 

    #A third one should be added to remove all blanks and tabs immediately before the end of line: 
    sed -e 's/#.*//' -e 's/[ ^I]*$//' -e '/^$/ d' 

    #remove the blank before the line ;
    sed 's/[ ]*//' <f1 >f2

    #remove blank lines 
    sed -e '/^$/ d' <f1 >f2 
    
    # 86) sed: repace part of file name with some other string 
    for f in *; do nf=`echo $f | sed 's/235955/235959/g'`; echo $f; mv $f $nf; done;
    for f in *; do nf=`echo $f | sed 's/215955/235959/g'`; if [ $f != $nf ]; then mv $f $nf; fi; done;
    
	for f in *; do nf=`echo $f | sed 's/-190628/-CON/g'`; if [ $f != $nf ]; then echo $f; sed 's/-190628/-CON/g' <$f >$nf; fi; done;
    for f in $(find . | grep json | grep Param); do echo $f; sed 's/"Id"/"GivenId"/g' <$f >temp.json; mv temp.json $f; done
	
    bash file '\r' command not found => remove trailing \r character that causes this error: sed -i 's/\r$//' filename
	
40) #matlab

surf(X,YY,Z1)
axis([0 10 0 80 0 100])
view([1,1,1])
axis normal

text('Interpreter','latex', 'String','$$\pi\times DoD=4^o$$','Position',[0.5,0.5], 'FontSize',16, 'Rotation', 90)



41) apt-cache search cd 
#search package

42) disable ssh password
1) run in local computer: ssh-keygen -t rsa  #generate pub key in local machine in (~/.ssh/id_rsa.pub)
2) run in local computer: ssh-copy-id -i $HOME/.ssh/id_rsa.pub user@remote
3) in cygwin .ssh folder may exit in the cygwin installation location iso $HOME
 => better solution: http://www.linuxproblem.org/art_9.html
 - remote host: the permision for home directory and .ssh has to be 700; for authorized_keys has to be 600. 
 - add -v to see debug info. if offered key is not accepted, check the permissions above.

 
43) #transcode campus2.avi into camp2.avi; -b means the given bit rate; -psnr shows the psnr of the transcoded video
    ffmpeg -i campus2.avi -b 20000 -psnr -deinterlace camp2.avi

44) Steps to solving this problem

Once the release node that is pointing to the old tag has been temporarily modified, you can follow these steps to remove the tag and create a branch from the same set of files and revisions. All earlier revisions history will be kept. We will assume Drupal 4.7 below.

   1. Make sure the release node is no longer pointing to your old tag (see above).
   2. cvs checkout -r DRUPAL-4-7 modules/mymodule
      (get a copy based on the old, non-branch tag)
   3. cd modules/mymodule
      (DON'T FORGET THIS!)
   4. cvs tag -d DRUPAL-4-7
      (delete the existing, non-branch tag)
   5. cvs tag -b DRUPAL-4-7
      (add the new branch tag to the same revisions of the files you've checked out in step #1)
   6. cvs update -r DRUPAL-4-7
      (to reset the sticky tag on your workspace to the new branch tag) 

45) cvs update results: 

U file
The file was brought up to date with respect to the repository. This is done for any file that exists in the repository but not in your source, and for files that you haven't changed but are not the most recent versions available in the repository. 
P file 
like U, but the cvs server sends a patch instead of an entire file. These two things accomplish the same thing. 
A file 
The file has been added to your private copy of the sources, and will be added to the source repository when you run `cvs commit' on the file. This is a reminder to you that the file needs to be committed. 
R file 
The file has been removed from your private copy of the sources, and will be removed from the source repository when you run `cvs commit' on the file. This is a reminder to you that the file needs to be committed. 
  file 
The file is modified in your working directory. `M' can indicate one of two states for a file you're working on: either there were no modifications to the same file in the repository, so that your file remains as you last saw it; or there were modifications in the repository as well as in your copy, but they were merged suc- cessfully, without conflict, in your working directory. 
C file 
A conflict was detected while trying to merge your changes to file with changes from the source repository. file (the copy in your working directory) is now the result of merging the two ver sions; an unmodified copy of your file is also in your working directory, with the name `.#file.version', where version is the revision that your modified file started from. (Note that some systems automatically purge files that begin with `.#' if they have not been accessed for a few days. If you intend to keep a copy of your original file, it is a very good idea to rename it.) 
? file 
file is in your working directory, but does not correspond to anything in the source repository, and is not in the list of files for cvs to ignore (see the description of the -I option). 


46) cvs branch

The rtag command can be used to create a branch. The rtag command is much like tag, but it does not require that you have a working copy of the module. See section rtag--Add a tag to the RCS file. (You can also use the tag command; see section tag--Add a symbolic tag to checked out version of RCS file).

cvs rtag -b -r release-1-0 release-1-0-patches tc

The `-b' flag makes rtag create a branch (rather than just a symbolic revision name). `-r release-1-0' says that this branch should be rooted at the node (in the revision tree) that corresponds to the tag `release-1-0'. Note that the numeric revision number that matches `release-1-0' will probably be different from file to file. The name of the new branch is `release-1-0-patches', and the module affected is `tc'. 


47) remove space from file name
   for ifile in *; do ofile=`echo $ifile | sed -e 's/ /_/g'`; echo $ifile; echo $ofile; mv "$ifile" $ofile; done
   
   convert image format
   for if in *.ppm; do echo $if; of=`echo $if | sed -e 's/ppm/eps/g'`; echo $of; convert $if $of; done
   
   for if in mvcdata/*.raw; do echo $if; of=`echo $if | sed -e 's/raw/own/g'`; echo $of; view.exe -r 13 -i $if -I $of -w 1024 -g 768 -c 2 -m 420; done
   
48) Compile GTS under windows
   a: install GTK (glib)
   b: set the environment variable INCLUDE and LIB to:
      set INCLUDE=C:\Program Files\Microsoft Visual Studio 8\VC\include;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Include;C:\GTK\include;C:\GTK\include\glib-2.0;C:\GTK\lib\glib-2.0\include;
      set LIB=C:\Program Files\Microsoft Visual Studio 8\VC\lib;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Lib;C:\GTK\lib;   
   c: nmake -f makefile.msc (need some midification of makefile.msc: add tribox3.obj to the end of the obj list)
   d: copy the .lib, .h and .dll to appropriate directories
   
49) OpenCV environment
   Include: C:\OpenCV\cv\include;C:\OpenCV\cvaux\include;C:\OpenCV\cxcore\include;C:\OpenCV\otherlibs\highgui
   Lib:     C:\OpenCV\lib
   Link:    cv.lib highgui.lib cvaux.lib cxcore.lib
   
   set INCLUDE=C:\Program Files\Microsoft Visual Studio 8\VC\include;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Include;C:\OpenCV\cv\include;C:\OpenCV\cvaux\include;C:\OpenCV\cxcore\include;C:\OpenCV\otherlibs\highgui
   set LIB=C:\Program Files\Microsoft Visual Studio 8\VC\lib;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Lib;C:\OpenCV\lib;   
         
50) GTS enviroment
    Include: C:\gts-0.7.6\include
    Lib:     C:\gts-0.7.6\lib
    
51) glib environment
    Include: C:\GTK\include\glib-2.0;C:\GTK\lib\glib-2.0\include;
    Lib:     C:\GTK\lib;   
  
    set INCLUDE=C:\Program Files\Microsoft Visual Studio 8\VC\include;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Include;C:\OpenCV\cv\include;C:\OpenCV\cvaux\include;C:\OpenCV\cxcore\include;C:\OpenCV\otherlibs\highgui;C:\GTK\include\glib-2.0;C:\GTK\lib\glib-2.0\include;
    set LIB=C:\Program Files\Microsoft Visual Studio 8\VC\lib;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Lib;C:\OpenCV\lib;C:\GTK\lib;
    
52) Windows DLL search path can be set by the 'path' command

53) msvcr80.dll not found in Debug mode
    reason: all lib have to be built for debug using /MDd option
    
54) manifest file is to indicate which dll the compiler should link with

55) gengetopt:
    a. generate cmdline .h and .c in linux using "gengetopt"
    b. in cmdline.c: change the "getopt.h" to "gnugetopt.h"
    c. add getopt.c and getopt1.c in C:\Program Files\GnuWin32\share\gengetopt to project
    d. in getopt.c:   change the "getopt.h" to "gnugetopt.h"
    e. in getopt1.c:  change the "getopt.h" to "gnugetopt.h"; add #include <string.h>
    
    
56) remove space from file name
   for ifile in *; do ofile=`echo $ifile | sed -e 's/ /_/g'`; echo $ifile; echo $ofile; mv "$ifile" $ofile; done
   

57) Philips computer complier search path setting

Bin: 

%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;C:\cygwin\bin;C:\Program Files\QuickTime\QTSystem\;%GTK_BASEPATH%\bin;C:\gts-0.7.6\bin;C:\libgsl-1.8\bin;C:\OpenCV\bin;C:\gnuwin32\bin

Include: 

C:\Program Files\Microsoft Visual Studio 8\VC\include;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Include;C:\GTK\include;C:\GTK\include\glib-2.0;C:\GTK\lib\glib-2.0\include;C:\OpenCV\cv\include;C:\OpenCV\cvaux\include;C:\OpenCV\cxcore\include;C:\OpenCV\otherlibs\highgui;C:\gts-0.7.6\include;C:\libgsl-1.8\include

Lib:

C:\Program Files\Microsoft Visual Studio 8\VC\lib;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Lib;C:\GTK\lib;C:\lib;C:\gts-0.7.6\lib;C:\libgsl-1.8\lib;C:\OpenCV\lib


58) "assert" is not executed in Release mode!! do not put anything that need to be run into assert!!!

59) when link debug and non-debug libraries together, there will appear the Error Message: "defaultlib 'library' conflicts with use of other libs;"
solution: use /NODEFAULTLIB:library


60) GSL: error LNK2001: unresolved external symbol _gsl_rng_default
solution: remember to define GSL_DLL preprocessor macro


61) ordering file names from 000 to 999
 a=0;ext=ppm;for file in *.$ext; do let a=a+1;b=`printf "%03d" $a`; f1=`basename $file .$ext`; f2=$f1.$b.$ext; echo $f2; cp $file $f2; done

62) if libvideogfx fail for reading and displaying image try to resize the image to multiple of 8
    ./view.bin -r 1 -i %03d.ppm:resize:1024:768 -o teddy.own


63) GdiPlus has to be initialized before they can be used
    	//CWinMaker needs GdiPlus
	GdiplusStartupInput _gdiplusStartupInput;
	ULONG_PTR           _gdiplusToken;
	//Initialize GDI+
 	void StartGdiplus ()    {GdiplusStartup  (&_gdiplusToken, &_gdiplusStartupInput, NULL);};
	//Shutdown GDI+
	void ShutdownGdiplus () {GdiplusShutdown (_gdiplusToken);};

64) remove ^M in a file
    sed 's/^M/ /g'  <tip.txt >tip.tmp

65) remove all CVS directories
    find . CVS | grep CVS | xargs rm -rvf

66) important VC++ project file
   *.sln = project file
   *.suo = project configuration file
   *.ncb = project browse file


67) d3dRender.exe: s=medusa;ext=.out;d3dRender.exe -i $s.own:0 -p $s.P$ext -x $s.X$ext -c $s.CC$ext


68) reconstruction is not stable when harris threshold is too low=======

69) cvs sticky tag is not a branch, commit fail; solution: 

Make sure the release node is no longer pointing to your old tag (see above). 

cvs checkout -r DRUPAL-4-7 modules/mymodule
(get a copy based on the old, non-branch tag)

cd modules/mymodule
(DON'T FORGET THIS!) 

cvs tag -d DRUPAL-4-7
(delete the existing, non-branch tag) 

cvs tag -b DRUPAL-4-7
(add the new branch tag to the same revisions of the files you've checked out in step #1) 

cvs update -r DRUPAL-4-7
(to reset the sticky tag on your workspace to the new branch tag) =======
   *.ncb = project browse file

70) d3dRender.exe: s=medusa;ext=.out;d3dRender.exe -i $s.own:0 -p $s.P$ext -x $s.X$ext -c $s.CC$ext

71) vc++ 9.0 PATH, in cmd window run: 
   set PATH=C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE;C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN;C:\Program Files\Microsoft Visual Studio 9.0\Common7\Tools;C:\WINDOWS\Microsoft.NET\Framework\v3.5;C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727;C:\Program Files\Microsoft Visual Studio 9.0\VC\VCPackages;C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin;
   
   if want to compile project under vc9, set the following directories
   set INCLUDE=C:\Program Files\Microsoft Visual Studio 9.0\VC\include;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Include;C:\GTK\include;C:\GTK\include\glib-2.0;C:\GTK\lib\glib-2.0\include;C:\OpenCV\cv\include;C:\OpenCV\cvaux\include;C:\OpenCV\cxcore\include;C:\OpenCV\otherlibs\highgui;C:\gts-0.7.6\include;C:\libgsl-1.8\include;C:\gts-0.7.6\include
   set LIB=C:\Program Files\Microsoft Visual Studio 9.0\VC\lib;C:\Program Files\Microsoft Platform SDK for Windows Server 2003 R2\Lib;C:\GTK\lib;C:\lib;C:\gts-0.7.6\lib;C:\libgsl-1.8\lib;C:\OpenCV\lib;C:\gts-0.7.6\lib

72) install gengetopt in Cygwin
   
73) LNK2005: multiple defined objects
    a. except in main.cpp, all function implementation should be put in .cpp file;
    b. template, static funtions should be in .h file
    
74) updatedb  --prunepaths='/proc /cygdrive/c/program_disk/cygwin
 /cygdrive/c/Documents.and.Settings/[^/]*/Local.Settings/Temp
 /cygdrive/c/Documents.and.Settings/[^/]*/Local.Settings/Temporary.Internet.Files
 /cygdrive/c/Documents.and.Settings/[^/]*/Local.Settings/Application.Data/Mozilla/Firefox/Profiles/[^/]*/Cache
 /cygdrive/[^/]*/System.Volume.Information
 /cygdrive/c/data/System.Volume.Information
 /cygdrive/c/backup/System.Volume.Information
 /cygdrive/c/shared/System.Volume.Information
 /cygdrive/c/program_disk/System.Volume.Information
 /cygdrive/g
 /cygdrive/h ?   
 
 updatedb  --prunepaths='/cygdrive/h /cygdrive/q /cygdrive/[^/]*/System.Volume.Information /cygdrive/c/Documents.and.Settings/[^/]*/Local.Settings /cygdrive/c/Documents.and.Settings/[^/]*/Recent /cygdrive/c/Documents.and.Settings/[^/]*/Application.Data'
 updatedb  --prunepaths='/cygdrive/d/backup /cygdrive/d/Download /cygdrive/d/Entertainment /cygdrive/[^/]*/System.Volume.Information /cygdrive/c/Documents.and.Settings/[^/]*/Local.Settings /cygdrive/c/Documents.and.Settings/[^/]*/Recent /cygdrive/c/Documents.and.Settings/[^/]*/Application.Data'
 
 
 75) a: harris corder detection (TIFM)
     b: feature point matching  (TIFM)
     c: 3D reconstruction       (recon.sh)
     d: obtain motion field     (MRF_MOTION)
     e: create depth            (MRF_DEPTH)

    note: it is important to add some blank space after the script statement, otherwise the command processor will recognize the 'return' as a command     

 76) fixed-width number in linux batch file
     for (( i = 1; i < 100; i++ )); do a=`printf "%03d" $i`; echo $a; done
     for (( i = 2; i < 379; i++ )); do a=`printf "%03d" $i`; b=cam_mvd_$a; echo $b.own; depth_batch.sh $b; done
     
 77) set the program priority in shell
     nice.exe -n 15   program.exe [options]  //decrease the cpu priority of program.exe 
     start.exe /low   program.exe [options]      //start program.exe as low-priority
     
 78) remove part of the filename
  s=40.25_cam_mvd_001_point2D.bin; a=`echo $s | sed 's/40.25_//g' | sed 's/_point2D.bin//g'`; echo $a;
  
  
  s=house2;n=+132;view.exe -r 4 -i $s.own$n -f $s.feature.w3t50$n -t $s.2frm.match.w3t50$n -s 17
  s=house2;n=+270+270;TIFM.exe -r 4 -i $s.own$n -f $s.feature.w3t50$n -t $s.2frm.match.tmp -z 140
      
  i=3;m1=r1(3*i-2:3*i,:);m2=r2(3*i-2:3*i,:);h=inv(m1)*m2
  i=3;m1=k1(3*i-2:3*i,:);m2=k2(3*i-2:3*i,:);h=inv(k1)*k2
  i=3;m1=r1(3*i-2:3*i,:);m2=r2(3*i-2:3*i,:);t1=c1(:,i);t2=c2(:,i);h=t1-inv(m1)*m2*t2
  
 79) convert all PNG file to PDF file in a directory
  for a in *.png; do b=`basename $a .png`; echo $a; echo $b.pdf; convert $a $b.pdf; done
    
 80) pre-pend text to all files in current folder and all subfolders
 for f in `find . -name "*.hh" -o -name "*.cpp" -o -name "*.cc" -o -name "*.[cChH]"`; do echo $f; cat /cygdrive/d/home/cvsfile/WinCode/work/filehead.txt $f > tt; mv tt $f; done
 
 
 81) ffmpeg
 ffmpeg -i /tmp/a.wav -s 640x480 -i /tmp/a.yuv /tmp/a.mpg
 
 H.264 I-frame only Highest Quality Encoding 
 ffmpeg -i <input_file> -vcodec h264 -cqp 1 -intra -coder ac -an output.mp4 

 82) Avisynth script
 
 #LoadPlugin("SmoothDeinterlacer.dll")
 #DirectShowSource("G:\sony\19-02-2009\20090219145407.m2ts", audio=false)
 #SmoothDeinterlace()
 ##AssumeTFF().FieldDeinterlace()
 #LanczosResize(1280,720) #Lanczos (Sharp)

 #load RGB raw format
 LoadPlugin("C:\Program Files\AviSynth 2.5\plugins\rawsource\rawsource.dll")
 RawSource("D:\home\cvsfile\WinCode\work\mvcdata\grid\depth.raw",1024,768,"Y8")
 ConvertToYV12()
 
 #load YUV420 raw format 
 LoadPlugin("C:\Program Files\AviSynth 2.5\plugins\rawsource\rawsource.dll")
 RawSource("D:\home\cvsfile\WinCode\work\IJCV\castle\castle_MV2.raw",768,576,"YV12")
 
 #read mp4 video
 DirectShowSource("D:\video\SANY0001.MP4",fps=60,convertfps=true)
 ConvertToYV12()
 
 use MeGui to compress into Xvid and x264 file 
 use VirtualDub to compress into RAW, MPEG2, avi file  (choose setting from the 'compression' menu)
 
 83) set matlab figure font
 figure; set(gcf,'defaultaxesfontsize',25);
 
 84) set matlab tick interval
 surf(X,Y,Z1); set(gca,'xtick',[0:40:200], 'XTickLabel',[0:40:200])

 85) regular expression: find string between two strings
    a) "(?<=\[)(.*?)(?=\])" => find string between []
    b) @"(?<=_)(\d{10})(?=_\d)";   //find 10 digit between "_"
    c) @"(?<=\d{10}_\d{4}_\d{10}?)(.*?)$";  //find between preceded string and end of string 
    
86) databinding/propertychanged principle: 
     1) databinding creates a subscription to the property between datasource and binding object; 
     2) once property is changed, the subsribed delegate is called with the property name; 
    3) the datasource is searched for the property either to get the value or set the value.

87) get directory structure in windows
   a) dir /s /b /o:n /ad
   b) tree 

88) fix visual studio error: may userdata is messed up
    common7/IDE/devenv /resetuserdata
  
89) ASP.NET mvc5
    1) every request create UserManager, SignInManager and RoleManager before Controller is created
    2) Install-Package Microsoft.AspNet.Identity.Samples -Pre => install identity 2.0 sample
	3) SignInManager.PasswordSignInAsync will only succeed if UserName == Email!

90) Mcv5 database migration
    1) Enable-Migrations => enable migrate ApplicationDbContext database when model changed
    2) update-database to update ApplicationDbContext and execute the Seed function in Configuration class
	3) sqllocaldb.exe stop followed by sqllocaldb.exe delete to stop localDb such that we can delete mdf file
	4) after update-database, we need to restart visual studio to make the dataconnection right.
	5) another method is through Seed in ApplicationDbInitializer, which is triggered by first time register or log in 
	6) database error just delete files, close program and start from fresh
	7) Add-Migration InitialMigrations -IgnoreChanges => This should generate a blank "InitialMigration" file. Now, add any desired changes to the class you want. Once changes are added, run the update command again:
    8) update-database -verbose => Now the automatic migration will be applied and the table will be altered with your changes
	9) if migration fails, try to delete entire migration folder and restart whole process including close studio and open again
	
91) Entity framwork database migration:
    1. two types of migration: 
	    a) via Code First Migration triggered by running update-database in terminal. Since all data are retained in this case, we usually use 
		   AddOrUpdate to handle exisiting data.
	    b) via ApplicationDbInitializer,  which is triggered when DbContext is first used, and when model is changed compare with last run. 
		   Since in this case the table is dropped, we dont have to handle exisiting data. But note that in this case all old data is lost.	
    2. migration from exisiting database
	   - Add-Migration Initial -IgnoreChanges => create a snapshot of the schema so that subsequent migration can follow. 
	     however we must make sure the model and code must match in this case, in order to apply the change to database. 
	   - update-database => apply initial to database
	   - modify the model -> add migration -> apply migration
	   - in order to prevent data loss, we use CreateDatabaseIfNotExists when we set 
	     Database.SetInitializer<ApplicationDbContext>(new ApplicationDbInitializer()) in ApplicationDbContext
		 => this means database will never be dropped and will not lose any data.
	   - this approach is best if we want to reverse engineer the database to create model. in the case, code and model are out of sync, it does not work. 
    3. migrate production database in server: http://stackoverflow.com/questions/17020393/asp-net-mvc-4-migrations-how-to-run-update-database-on-a-production-server
	   - as in the post, one way is to run update-database -script after add-migration, and then run the generated sql command in database
	4. handle out-of-sync between code and database: https://msdn.microsoft.com/en-us/data/dn579398.aspx
	   for example, we switch between different databases and do not keep all databases up to date while we work on specific database. 
	   a. delegate database and migration, so that everything start from scrach. 
	      - note that each migration keeps a snapshot of the model, add-migration simply compare current model with the snapshot to determine the difference to apply to the database. 
		    in this case, model is compared to an empty snapshot. 
		  - enable-migration for specific context => add migration => update-database 
	   b. 
	     - backup models and create code first model from existing database
		 - enable-migration => add-migration inital -ignorechanges => update-database (here all changes of the models by code generation are ignored, so that no change will be applied to database. 
		   however, a snapshot is created such that subsequent change can be applied.)
		 - change models to the latest version in backup
		 - add-migration second => update-database
	   c. if all migration history are kept, we should be able to determine from MigrationHistory of the code and the database which migrations are needed for current database.
	      in this case, we just need to run update-database. the important is that history should be complete, such that both the database and the model can be updated to the latest status and match each other. 
	   
	
91) Attached mdf file to sql server
    1) run sql management tool as administrator
	2) right click Databases and click attach to select mdf file
	3) to detach: right click the attached database => Task => Detach

92) web deployment, web publish, configure sql server express and iis: http://www.codeproject.com/Articles/674930/Configuring-IIS-ASP-NET-and-SQL-Server
    1) configure TCP/IP in SQL Server Configuration Manager to allow connection using IP address
	   a. Protocols for SQLEXPRESS => Enable TCP/IP => Enable Listen All => set TCP Port to 1433 in IP Address
	2) configure IIS to run IIS using NetworkService identity
	   a. Root => Authentication => Anonymous Authentication => use Application pool identity
	   b. Application Pools => set Identity for all items (DefaultAppPool etc.) to NetworkService
	3) give full permission of the website root directories to NetworkService
	4) Configure Sql Server management studio to allow access from IIS (NetworkService)
       a. add NetworkService in new login 	
	   b. assign it to sysadmin group   
    5) connectionString =  <add name="DefaultConnection"  connectionString="Data Source=127.0.0.1;Integrated Security=True" providerName="System.Data.SqlClient" />
	6) Viewing my IIS hosted site on other machines on my network 
	   a. http://stackoverflow.com/questions/2184013/viewing-my-iis-hosted-site-on-other-machines-on-my-network
	   b. follow the link to allow incoming calls on port 80 (predefined world wide web service) 
	
	7) before publish from visual studio, we need to add application to IIS: Default Web Site -> Add Application, otherwise we will see many assemblies could
	   not be resolved warnings and deployment fail.
	   
	8) before deployment, we have to first install the IIS, Asp.Net, etc. from server manager
		
	References: https://www.youtube.com/watch?v=-ymjT8C-tHc
	            https://www.youtube.com/watch?v=q7LBgyQwNLc
				https://msdn.microsoft.com/query/dev14.query?appId=Dev14IDEF1&l=EN-US&k=k(WebApplicationProjects.PackagePublishOverview);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.6.1)&rd=true				
				
	   
93) test sql server connection: create an empty file with .udl extension and open it

94) set Asp.Net web app to use SSL: http://www.asp.net/mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on
    1) enable SSL in project properties: view => properties window
	2) copy the SSL URL to Project Properties web tab

95) fix assembly load prolem in visual studio 2015
    1) error message: Could not load file or assembly 'Microsoft.VisualStudio.JSLS,Version=14.0.0.0 , Culture=neutral , PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies.the system can not find the file specified.
	2) Open a command prompt as administrator or Develop Command prompt 
    3) CD into C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE (not needed for Develop Command)
	4) Run devenv /updateconfiguration 
    5) Run devenv /clearcache	

96) Antiforgery token works only with POST, since it relies on Cookie to send the token

97) serve local json/csv file for webdevelopment:
    a) in python run: npm install -g http-server
	b) then, as above, cd into dir containing your some.html and issue: http-server -c-1 
	   which spins up a nodejs httpd which does a dir listing of your static files visible from :
	c) open webpage using http://localhost:8080/index.html. json/csv can be loaded in html. 
	
98) reference different Debug/Release DLL: You can edit the csproj file manually set the Condition attribute on the ItemGroup containing the reference.
  <ItemGroup Condition="'$(Configuration)' == 'Debug'">
    <Reference Include="MyLib">
      <HintPath>..\..\Debug\MyLib.dll</HintPath>
    </Reference>
  </ItemGroup>

  <ItemGroup Condition="'$(Configuration)' == 'Release'">
    <Reference Include="MyLib">
      <HintPath>..\..\Release\MyLib.dll</HintPath>
    </Reference>
  </ItemGroup>

99) Cygwin Root access 
    a. create in /usr/bin "sudo" with following content:    cygstart --action=runas "$@"
	b. make sudo executeable: chmod +x ~/bin/sudo
	c. "sudo command" will then use root previlige
	cywin cannt open dispay: using ssh -Y instead of -X
	

100) Git:
     - clone single branch:  "git clone user@git-server:project_name.git -b branch_name --single-branch /some/folder"
	 - view files: git ls-tree --full-tree -r HEAD	 
	 - git checkout -b release-1.2 develop: Switched to a new branch "release-1.2" which is created based on develop branch	 
     - ./bump-version.sh 1.2: Files modified successfully, version bumped to 1.2.
     - git commit -a -m "Bumped version number to 1.2": Bumped version number to 1.2
	 - git clone --branch <tag_name> <repo_url>: checkout a tag but we cannot push to repositoryd
	 - visualize git log: git log --graph --full-history --all --color --date=short --pretty=format:"%x1b[31m%h%x09%x1b[32m%d%x1b[0m%x20%ad %s"
	 - git checkout -b branchv1.0 v1.0 => create and checkout branch1.0 based on tag v1.0 
	 - git tag -a v1.4 -m "my version 1.4" 
	 - git push origin v1.4 => can do not need upstream can push from anywhere
	 - git branch -d client => delete branch client
	 - git ls-files -m => list modified file
	 - git add -u => add all modifed files 
	 - git status --porcelain -uno => list modified and staged files but not untracked files
	 - git push origin --delete serverfix => delete remote brach
	 - create new brach based on remote brach =>
	   1. git checkout -b serverfix origin/serverfix
	   2. git checkout --track origin/serverfix
	   3. git checkout serverfix
	 - git fetch => retrieve info about brach from remote
	 - git push home --delete dev => delete remote branch dev on home
	 - git push home dev:hangzhou => push dev to remote brach hangzhou
	 - git config --global credential.helper cache => keep username and password in memory for a few minutes to avoid input password repeatedly
	 - git fetch --all => git reset --hard origin/master => git pull: git pull ignore local change

     - git delete tag:  git push origin :tagname
         Or, more expressively, use the --delete option:  git push --delete origin tagname
         If you also need to delete the local tag, use:   git tag --delete tagname		 
	 - git pull abandon merge => reset --hard		
     - git config --global credential.helper cache => remember git credential
	 - git pull ignore local/remote change: http://stackoverflow.com/questions/2073841/how-can-i-discard-remote-changes-and-mark-a-file-as-resolved
	   git checkout --ours . # checkout our local version of all files to keep local copy
       git add -u            # mark all conflicted files as merged
       git commit            # commit the merge 
	   if we use 'git checkout --theirs .' means we want to keep the remote copy 
     - git set upstream branch => git branch --set-upstream-to ali/master
	 - get commit numbers of local/remote/ and common ancestor 
	   LOCAL=$(git rev-parse @)
       REMOTE=$(git rev-parse @{u})
       BASE=$(git merge-base @ @{u})
	   
     - git cache password: git config --global credential.helper wincred	   
     - replace branch with another =>
	   git checkout seotweaks
       git merge -s ours master
       git checkout master
       git merge seotweaks
	 - git list changes => git status --porcelain -uno
	 - undo clone single branch 
	   You can tell Git to pull all branches like this: 
	   git config remote.origin.fetch "+refs/heads/*:refs/remotes/origin/*"
	   git fetch origin
	 - remember git password in cygwin: https://stackoverflow.com/questions/18683935/store-https-passwords-with-cygwins-git
	   git config --global credential.helper 'cache --timeout=36000' => remember for 10 hours

	 
	   
101) Msbuild:
     a. <Target Name="Build">
          <MakeDir Directories="$(OutputPath)" Condition="!Exists('$(OutputPath)')" />
          <Csc Sources="@(Compile)" OutputAssembly="$(OutputPath)$(AssemblyName).exe" />
        </Target>
        <Target Name="Clean" >
          <Delete Files="$(OutputPath)$(AssemblyName).exe" />
        </Target>
        <Target Name="Rebuild" DependsOnTargets="Clean;Build" />
		=> Add targets to PortableCSharpLib.csproj
     b. msbuild PortableCSharpLib.csproj /t:build /p:OutputPath=output\  /p:AssemblyName=test => run 'build' target and write targets to 'output\' with test as the name 	
     c. run C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vsvarsall.bat to set up msbuild enviroment
	 d. To include MSBuild.Community.Tasks.Targets (install from NuGet): 
         <PropertyGroup>
           <MSBuildCommunityTasksPath>E:\Code\build</MSBuildCommunityTasksPath>
         </PropertyGroup>
         <Import Project="$(MSBuildCommunityTasksPath)\MSBuild.Community.Tasks.Targets"/>  
	 e. To define target to assocate git commit hash with assembly version number:
        <PropertyGroup>
          <Major>1</Major>
          <Minor>0</Minor>
          <Build>0</Build>
          <Revision>0</Revision>
        </PropertyGroup>
        <Target Name="Version">
        <GitVersion LocalPath="$(MSBuildProjectDirectory)">
            <Output TaskParameter="CommitHash" PropertyName="Revision" />
        </GitVersion>
        <AssemblyInfo
            CodeLanguage="CS"
            OutputFile="Properties\AssemblyInfo.cs"
            AssemblyTitle="YourAssmblyName"
            AssemblyDescription="Description"
            AssemblyCompany=""
            AssemblyProduct="Productname"
            AssemblyCopyright="Copyright"
            ComVisible="false"
            CLSCompliant="true"
            AssemblyInformationalVersion="$(Major).$(Minor).$(Build).$(Revision)"
            AssemblyVersion="$(Major).$(Minor).$(Build)"
            AssemblyFileVersion="$(Major).$(Minor).$(Build)" />
        </Target>  
	f.  allow automatic increment of Build and Revision =>  AssemblyVersion="$(Major).$(Minor).*"
	h. run python script to build project => 
	    python E:\Code\PythonScript\PythonScript\MsBuild.py -p PortableCSharpLib.csproj -a "/t:GitBuild /p:OutputPath=output /p:Minor=10 /p:Major=2 /p:Configuration=Release"

102) python read file error: json.decoder.JSONDecodeError: Unexpected UTF-8 BOM (decode using utf-8-sig): line 1 column 1 (char 0)
	1. microsoft insert UTF-8 BOM character at the beginning of utf-8 file
    2. open the file using utf-8-sig instead => with open(dependencyFileName, 'r', encoding='utf-8-sig') as f:
     
103) MVC entityframework data model:
    a. use virtual to define navigation property
	b. use ICollection to define one-to-many property	
  
104) Xamarin
    1. make sure right save version libararies are installed for all projects
	2. if encounter strange error like breakpoints not hit
	   a. check nuget packages for all projects in the solution, make sure they are of same version
	   b. install microsoft.bcl and microsoft.bcl.build for all projects => dont understnad why
	3. deploy error: Mono.AndroidTools.InstallFailedException: Unexpected install output:    pkg: /data/local/tmp/android.crosswrd-Signed.apk
	                 Failure [INSTALL_PARSE_FAILED_MANIFEST_MALFORMED]		 
	   a. attribute [IntentFilter(new String[] { "Xamarin.TraderMobile.QuoteService" })] of a service can cause the error

105) VS C# error:
    1. missing compiler required memeter => add microsoft.csharp to reference

106) NuGet:
     update-package -reinstall -projectname <project> => reinstall all packages from packages.config and add to reference 
	 install-package <package> => install package
	 
107) bash
     - run bash command from windows command: 
	   D:\cygwin64\bin\bash.exe bash.exe -l -c 'ls'
	   D:\cygwin64\bin\bash.exe -c -l '/cygdrive/d/home/sync/sync.sh /cygdrive/e/Code/ /cygdrive/d/OneDrive/Code/ /cygdrive/d/home/sync/exclude_file.txt 2'
	 - bash script '\r' command not recoginzed => run dos2unix file
	 - list all directories in a directory: for f in /cygdrive/d/home/liping/D/www/bonobo/App_Data/Repositories/*; do if [[ -d $f ]]; then echo $(basename $f);fi;done > tmp.txt
	 - read list from file: for f in $(cat tmp.txt);do echo $f;done
	 - find all directories in current folder: find . -type d -maxdepth 1
	 - check git repo:  for f in $(find /cygdrive/e/Code/20180722_IBTrader_1.0.1/ -type d -maxdepth 1); do ./CheckModifiedRepo.sh $f; done
	 

108) creating virtual machine using Hyper-V: http://www.groovypost.com/howto/create-virtual-machine-windows-10-hyper-v/


http://appserver.lenovo.com.cn/Lenovo_Series_List.aspx?CategoryCode=A19B02C15

109) Xamarin, Porable libararies:
     - sometimes if we cannot install nuget package for portable library we can mannually add it, like SignalR for portable
	 - 

110) Sql Server configuration
     - allow login using username and password => Enable SQL Server login mode in Management Studio
	   1. enable SQL server and Windows Authentication mode  => Properties => Security
	   2. allow remote connection in Properties => Connections
	   3. create account in Security => login 
     - allow remote connection via Tcp in Configuration Manager
	   1. enable TCP/IP and and set port to 1433 in Protocols for SQLEXPRESS
       2. enable named pipe in Protocols for SQLEXPRESS
	   3. restart SQL Server and SQL Server Browser in Configuration Manager
	 - allow inbound on port 1433 in Windows Firewall (may not needed)
	 - add data connection in VisualStudio
	    open Server Explorer => Add Connections => type in "Ip Address\SQLEXPRESS" => select SQL Server Login => type in username and password
	 - copy database to the server by detaching and attaching the database
	 
	 
111) web deployment using deployment package : https://msdn.microsoft.com/en-us/library/ff356104(v=vs.110).aspx
     - Generate deployment package in visual studio => we can indicate whether to include App_Data and ConnectionString
     - Web Server: install Remote Agent and Web Management: https://technet.microsoft.com/en-us/library/dd569030(v=ws.10).aspx
	   1. Remote Agent: install web deployment tool => from Programs and Features, right click of Web Deploy => click Change => install Remote Agent	   
	   2. Web Management: from Server => IIS => Management tool => install Web Management
	 - Web Server: make sure Web Deployment Agent Service and Web Management Service is running in "Services"
	   1. Services => enable above two services
 	 - Local computer:
        1. install web deployment tool (msdeploy.exe)	 
	    1. run ".\MetalTrader.deploy.cmd /t /m:120.26.217.254 /u:Administrator /p:Windows2012" from power shell or cygwin with Administrator
	    2. or run "C:\Program Files\IIS\Microsoft Web Deploy V3\msdeploy.exe" -source:package='D:\DeploymentPackage\MetalTrader.zip' -dest:auto,computerName="120.26.217.254", userName="Administrator",password="Windows2012",includeAcls="False" -verb:sync -disableLink:AppPoolExtension -disableLink:ContentExtension -disableLink:CertificateExtension -skip:objectname='dirPath',absolutepath='obj\\Release\\Package\\PackageTmp\\App_Data$' -skip:objectname='dirPath',absolutepath='MetalTrader\\App_Data$' -setParamFile:"D:\DeploymentPackage\MetalTrader.SetParameters.xml" -whatif			
		          "C:\Program Files\IIS\Microsoft Web Deploy V3\msdeploy.exe" -source:package='D:\DeploymentPackage\MetalTrader.zip' -dest:auto,computerName="120.26.217.254", 
		           userName="Administrator",password="Windows2012",includeAcls="False" -verb:sync -disableLink:AppPoolExtension -disableLink:ContentExtension -disableLink:CertificateExtension 
				   -skip:objectname='dirPath',absolutepath='obj\\Release\\Package\\PackageTmp\\App_Data$' -skip:objectname='dirPath',absolutepath='MetalTrader\\App_Data$' 
				   -setParamFile:"D:\DeploymentPackage\MetalTrader.SetParameters.xml" -whatif
				   
112) windows server
     - install .Net 3.5 on Windows 2012 R2 => we need to enable windows update as in http://serverfault.com/questions/463604/unable-to-install-net-3-5-on-windows-server-2012
      a. Start the Local Group Policy Editor(search Edit Group Policy) or Group Policy Management Console.
      b. Expand Computer Configuration, expand Administrative Templates, and then select System.
      c. Open the Specify settings for optional component installation and component repair Group Policy setting, and then select Enabled.
      d. Select the Contact Windows Update directly to download repair content instead of Windows Server Update Services (WSUS) check box.
	  
	 - create samba share folder => install File Server => create samba folder => add permission for selected users (import to note that we have add sharing permission from file properties)
	 - HTTP Error 500.19 - Internal Server Error: This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault="Deny"), 
	   or set explicitly by a location tag with overrideMode="Deny" or the legacy allowOverride="false". 
	   solution: => install "Application Development Features (all but CGI)" from Server => Add role and feature => IIS => Application Development Features
	 

113) visual studio:  
     MSBUILD : error MSB4017: Could not run the "GenerateResource" task because MSBuild could not create or connect to a task host with runtime "CLR2" and architecture "x86"
     => Click Start>>right-click Computer>>Properties>>Advanced system settings>>click Environment Variables button to open the dialog, then under the System variables section, click New… button, type the Variable name = DISABLEOUTOFPROCTASKHOST, and type the Variable value = 1, then click Ok.	 
    
     I was trying to create the publish the project using
     "C:\Program Files (x86)\MSBuild\14.0\Bin\MSBuild.exe" MyProject.csproj /t:package /p:configuration=release
     The above line works perfectly fine for web projects but for windows project it should be
     "C:\Program Files (x86)\MSBuild\14.0\Bin\MSBuild.exe" MyProject.csproj /t:publish /p:configuration=release

114) JIRA
     - issue created but not visible in board => delete the default board and create a new scrum board for the project


115) withdraw singapore cpf:
    a. fill cpf - lm form from cpf website
	b. get renunciation letter from ica
	
116) System.IO.FileLoadException: Could not load file or assembly 'Castle.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) ---> System.IO.FileLoadException: Could not load file or assembly 'Castle.Core, Version=1.2.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)
     - fix => add bindingRedirect to app.config
      <dependentAssembly>
        <assemblyIdentity name="Castle.Core" publicKeyToken="407dd0808d44fbdc" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.1.1.0" newVersion="4.1.1.0" />
      </dependentAssembly>
 
	
117) docker
     - access docker repository in linux container on windows: https://blog.jongallant.com/2017/11/ssh-into-docker-vm-windows/
	   Get container with access to Docker Daemon
       Run container with full root access
       Switch to host file system
       docker run --privileged -it -v /var/run/docker.sock:/var/run/docker.sock jongallant/ubuntu-docker-client 
       docker run --net=host --ipc=host --uts=host --pid=host -it --security-opt=seccomp=unconfined --privileged --rm -v /:/host alpine /bin/sh
       chroot /host
	   
	 - build .net core cosole docker image 
	   https://docs.microsoft.com/en-us/dotnet/core/docker/docker-basics-dotnet-core
	   
	 - remove all stopped containers => docker rm $(docker ps -a -q)
	 - view container ip address => docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'
	 - mount courrent directory and list the cotents => docker run --rm -v ${PWD}:/data alpine ls -la /data
	 - WORKDIR in dockfile will be automatically created 
	 - dotnet run 
	   a. docker run --rm -it --workdir /app -v E:/data:/app/config -e "ENV_BITTREXSERVER=Docker" -e "ENV_CONFIG_FOLDER=config" --name bittrexserver bittrexserver
	 - remove "none" docker images => docker rmi $(docker images --filter "dangling=true" -q --no-trunc)
	 - run c# tcp client server in container 
       a. docker run --rm -it --workdir /app -v E:/data/ServiceRegistry:/app/config --network host -e "ENV=Docker" -e "ENV_CONFIG_FOLDER=config" --name serviceregistry serviceregistry
       b. docker run --rm -it --workdir /app -v E:/data/BittrexServer:/app/config --network host -e "ENV=Docker" -e "ENV_CONFIG_FOLDER=config"--name bittrexserver bittrexserver
       c. important is we have to run both of them in host network, then we can connect to them as the normal  	   
	   d. we mount windows folder to VM such that we can change the configuration 
	 
	 - run docker registry with tls enabled:
	   docker run -d --restart=always --name registry -v "$(pwd)"/certs:/certs -e REGISTRY_HTTP_ADDR=0.0.0.0:443 -e REGISTRY_HTTP_TLS_CERTIFICATE=/certs/domain.crt -e REGISTRY_HTTP_TLS_KEY=/certs/domain.key -p 443:443 registry:2
	 - run insecure registry:
   	   server: docker run -d -p 5000:5000 --restart=always --name registry registry:2 => https://docs.docker.com/registry/deploying/
	   client: add registry to daemon: "insecure-registries" : ["myregistrydomain.com:5000"] => https://docs.docker.com/registry/insecure/
	 - push image to remote registry:
	   docker tag rhel-httpd registry-host:5000/myadmin/rhel-httpd
	   docker push registry-host:5000/myadmin/rhel-httpd
	 - docker expose vs publish ports: expose => ports can be used by container within same network. publish => publish to host 
	 - docker connect to tcp server within a container: 1) make server listening to 0.0.0.0 instead of 127.0.0.1; 2) publish port
	 - docker error: http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.35/info: open //./pipe/docker_engine: The system cannot find the file specified. In the default daemon configuration on Windows, the docker client must be run elevated to connect. This error may also indicate that the docker daemon is not running
	   cd "C:\Program Files\Docker\Docker"
       ./DockerCli.exe -SwitchDaemon
	 - docker login into container and run bash: docker exec -it imageid bash	 
	 - docker failed to start in linux => run
	    systemctl start docker
		systemctl status docker
	 - failed to select share drive: 
	 - debug docker error:
	   a. check config file carefully   
	 
     - move docker to another disk:
         wsl --shutdown
         wsl --export docker-desktop-data docker-desktop-data.tar
         wsl --unregister docker-desktop-data
         wsl --import docker-desktop-data D:\docker\ docker-desktop-data.tar --version 2
	 
	run mysql: 
	  docker run -d -p 3306:3306 --name mysql-latest -e MYSQL_ROOT_PASSWORD=seller-soft mysql:latest

	  run captureserver:
docker run --rm --workdir /app -v E:/data/CryptoCaptureServer:/app/config -v E:/data:/app/data -e "ENV=Docker" -e "ENV_CONFIG_FOLDER=config" --name cryptocaptureserver cryptocaptureserverdocker run --rm -it --workdir /app -v E:/data/CryptoCaptureServer:/app/config -v E:/data:/app/data -e "ENV=Docker" -e "ENV_CONFIG_FOLDER=config" --name cryptocaptureserver cryptocaptureserver
docker run --rm --workdir /app -v E:/Code/20180722_IBTrader_1.0.1/appsettings:/app/config -v E:/data/Crypto:/app/data -p 2000:2000 -p 2001:2001 -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=Zookeeper1" --name Zookeeper1 zookeeper	 	 
docker run --rm --workdir /app -v E:/Code/20180722_IBTrader_1.0.1/appsettings:/app/config -v E:/data/Crypto:/app/data -p 3003:3003              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexFutureCaptureService" --name OkexFutureCaptureService okex_future_capture_service
docker run --rm --workdir /app -v E:/Code/20180722_IBTrader_1.0.1/appsettings:/app/config -v E:/data/Crypto:/app/data -p 3004:3004              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexFutureTradeService" --name OkexFutureTradeService okex_future_trade_service
docker run --rm --workdir /app -v E:/Code/20180722_IBTrader_1.0.1/appsettings:/app/config -v E:/data/Crypto:/app/data -p 3005:3005              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexFutureQuoteService" --name OkexFutureQuoteService okex_future_quote_service

docker run --rm --workdir /app -v E:/Code/20180722_IBTrader_1.0.1/appsettings:/app/config -v E:/data/Crypto:/app/data -p 3006:3006              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexSpotCaptureService" --name OkexSpotCaptureService okex_spot_capture_service
docker run --rm --workdir /app -v E:/Code/20180722_IBTrader_1.0.1/appsettings:/app/config -v E:/data/Crypto:/app/data -p 3007:3007              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexSpotTradeService"   --name OkexSpotTradeService   okex_spot_trade_service
docker run --rm --workdir /app -v E:/Code/20180722_IBTrader_1.0.1/appsettings:/app/config -v E:/data/Crypto:/app/data -p 3008:3008              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexSpotQuoteService"   --name OkexSpotQuoteService   okex_spot_quote_service
                
docker run --rm --workdir /app -v ~/appsettings:/app/config -v ~/data:/app/data -p 2000:2000 -p 2001:2001 -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=Zookeeper1" --name Zookeeper1 localhost:5000/zookeeper:latest
docker run --rm --workdir /app -v ~/appsettings:/app/config -v ~/data:/app/data -p 3001:3001              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexFutureCaptureService" --name OkexFutureCaptureService 121.43.98.245:5000/okex_future_capture_service:latest
docker run --rm --workdir /app -v ~/appsettings:/app/config -v ~/data:/app/data -p 3004:3004              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexFutureQuoteService" --name OkexFutureQuoteService localhost:5000/okex_future_quote_service:latest

docker run --rm --workdir /app -v ~/appsettings:/app/config -v ~/data:/app/data -p 3012:3012              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexSubscribeService" --name OkexSubscribeService 121.43.98.245:5000/okex_subscribe_service:latest  --restart unless-stopped 
docker run --rm --workdir /app -v ~/appsettings:/app/config -v ~/data:/app/data -p 3008:3008              -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=OkexSpotQuoteService" --name OkexSpotQuoteService 121.43.98.245:5000/okex_spot_quote_service:latest --restart unless-stopped 

docker run --rm --workdir /app -v E:/appsettings:/app/config -v E:/data:/app/data -p 30013:30013 -p 5001:5001 -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=SpotTrader" --name SpotTrader 47.90.96.154:5000/spottrader:v5


ssh $hzcts 'docker-compose up' & ssh $hkcts 'docker-compose up'
ssh $hzcts 'docker-compose down' & ssh $hkcts 'docker-compose down'
ssh $hzcts 'docker stop Zookeeper1 & docker stop OkexFutureQuoteService' & ssh $hkcts 'docker stop OkexFutureCaptureService & docker stop OkexFutureTradeService'
ssh $hzcts './StartZookeeper.sh' 
ssh $hkcts './StartOkexFutureCaptureService.sh & ./StartOkexFutureTradeService.sh'
ssh $hzcts './StartOkexFutureQuoteService.sh' 

cd $root/Zookeeper; name=47.90.96.154:5000/zookeeper;                     docker build -f Zookeeper/Dockerfile -t $name .; docker push $name


root=~/E/Code/20180722_IBTrader_1.0.1
cd $root/Okex; name=47.90.96.154:5000/okex_subscribe_service:v5;  docker build -f OkexSubscribeService/Dockerfile -t $name .; docker push $name
cd $root/Okex; name=47.90.96.154:5000/okex_spot_quote_service:v5; docker build -f OkexSpotQuoteService/Dockerfile -t $name .; docker push $name

cd $root/Okex; name=47.90.96.154:5000/okex_subscribe_service:v5;  docker build -f OkexSubscribeServiceV5/Dockerfile -t $name .; docker push $name
cd $root/Okex; name=47.90.96.154:5000/okex_spot_quote_service:v5; docker build -f OkexQuoteServiceV5/Dockerfile -t $name .; docker push $name

cd $root/CryptoCapture; name=47.90.96.154:5000/okex_take_profit;  docker build -f TraderBase/Dockerfile -t $name .; docker push $name



root=~/E/Code/20180722_IBTrader_1.0.1
cd $root/BinanceTrader; name=47.90.96.154:5000/binance_subscribe_service;  docker build -f BinanceSubsribeService/Dockerfile -t $name .; docker push $name
cd $root/BinanceTrader; name=47.90.96.154:5000/binance_spot_quote_service; docker build -f BinanceQuoteService/Dockerfile -t $name .; docker push $name
cd $root/CryptoCapture; name=47.90.96.154:5000/binance_spot_trader;        docker build -f BinanceTrader/Dockerfile -t $name .; docker push $name

root=~/E/Code/20180722_IBTrader_1.0.1
cd $root/HuobiTrader; name=47.90.96.154:5000/huobi_subscribe_service;    docker build -f HuobiSubscribeService/Dockerfile -t $name .; docker push $name
cd $root/HuobiTrader; name=47.90.96.154:5000/huobi_spot_quote_service;   docker build -f HuobiQuoteService/Dockerfile -t $name .; docker push $name
cd $root/CryptoCapture; name=47.90.96.154:5000/huobi_spot_trader;        docker build -f HuobiTrader/Dockerfile -t $name .; docker push $name

root=~/E/Code/20180722_IBTrader_1.0.1
cd $root/CryptoCapture; name=47.90.96.154:5000/spottrader:v5;             docker build -f SpotTraderConsole/Dockerfile -t $name .; docker push $name
cd $root/CryptoCapture; name=47.90.96.154:5000/binance_spot_trader;        docker build -f BinanceTrader/Dockerfile -t $name .; docker push $name
cd $root/CryptoCapture; name=47.90.96.154:5000/huobi_spot_trader;        docker build -f HuobiTrader/Dockerfile -t $name .; docker push $name



root=~/E/Code/20180722_IBTrader_1.0.1
cd $root/FZWebTrader/FZWebTrader; name=47.90.96.154:5000/fzserver; docker build -f Server/Dockerfile -t $name .; 
cd $root/FZWebTrader/FZWebTrader; name=47.90.96.154:5000/fzclient; docker build -f Client/Dockerfile -t $name .; 


#################################
docker run --rm -it --workdir /app -v C:/Users/liping/%USERPROFILE%/.aspnet/https:/https -v E:/appsettings:/app/config -v E:/data:/app/data -p 3013:3013 -p 5001:5001 -p 8000:80 -p 8001:443 -e ASPNETCORE_URLS="https://+;http://+" -e ASPNETCORE_HTTPS_PORT=8001 -e ASPNETCORE_Kestrel__Certificates__Default__Path=/https/aspnetapp.pfx -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=SpotTrader" --name SpotTrader 47.90.96.154:5000/spottrader:v5
docker run --rm -it -p 8000:80 -p 8001:443 -e ASPNETCORE_URLS="https://+;http://+" -e ASPNETCORE_HTTPS_PORT=8001 -e ASPNETCORE_Kestrel__Certificates__Default__Password="password" -e ASPNETCORE_Kestrel__Certificates__Default__Path=/https/aspnetapp.pfx -v %USERPROFILE%\.aspnet\https:/https/ mcr.microsoft.com/dotnet/core/samples:aspnetapp

docker run --rm -it --workdir /app --mount type=bind,source=E:/appsettings/appsettings.DKR.json,target=/app/wwwroot/appsettings.DKR.json -v E:/data:/app/data -e ASPNETCORE_URLS="https://+;http://+" -e ASPNETCORE_HTTPS_PORT=8001 -e "ENV=DKR" -e "ENV_CONFIG_FOLDER=config" -e "SERVICE_NAME=FZWebTrader.Client" --name fzclient fzclient
docker run --rm -it --workdir /app -v E:/appsettings/appsettings.DKR.json:/app/wwwroot/appsettings.DKR.json -v E:/appsettings/appsettings.json:/app/wwwroot/appsettings.json -e ASPNETCORE_URLS="https://+;http://+" -e ASPNETCORE_HTTPS_PORT=8001 -e "ENV=DKR" -e "SERVICE_NAME=FZWebTrader.Client" --name fzclient fzclient

rsync -avz ~/E/data/Okex/testparam.json $hkcts:~/data/config/
rsync -avz appsetings.DKR.json  $hkcts:~/appsetings/


Get-DbContext
$env:CONN="HD1"

cd ~/E/Code/20180722_IBTrader_1.0.1/CryptoCapture
name=47.90.96.154:5000/future_take_profit:v5
docker build -f SwapConTraderConsole/Dockerfile -t $name .
docker push $name


cd ~/E/Code/20180722_IBTrader_1.0.1/OkexServices
name=47.90.96.154:5000/okex_future_quote_service:v5
docker build -f OkexFutureQuoteService/Dockerfile -t $name .
docker push $name




docker stack deploy -c ./docker-compose.yml zoo
docker stack rm zoo

     - set timezone in dockfile => 
       ENV TZ=Asia/Shanghai
       RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone
 
118) centos
     - user is not in sudoer's file => 1) ssh root@localhost and then 2) add user to /etc/sudoers	 
	 - get public ip address: curl ifconfig.me, curl icanhazip.com, curl ipecho.net/plain, curl ifconfig.co, 	 

	 
119) 外包
     - 外包费用计算： https://www.cnblogs.com/GmrBrian/p/3226801.html

	 
120) 4cnconsult 
     - 

121) java deploytment:
     点击package打包，复制target目录下的内容到服务器。
     运行命令：
     
     运行springboot应用： nohup java -jar   xxxx.jar --spring.profiles.active=test   
     test 表示 运行环境，可以指定以下几个值：dev, test, prod
      
     运行控制台应用： nohup java -jar xxxx.jar  
     如果是生产环境： nohup java -Dapp.profile=prod  -jar xxxx.jar  
     
     
     例子：
     
     nohup java -jar /data/application/4cnconsult/4cnconsult-webapi/_4cnconsult-webapi-1.0-SNAPSHOT.jar -spring.profiles.active=prod >webapi.out 2>&1 &
     nohup java -jar -Dapp.profile=prod /data/application/4cnconsult/4cnconsult-jingdata-capturer/_4cnconsult-jingdata-capturer-1.0-SNAPSHOT.jar > ./jingdata-capturer.out 2>&1 &
     nohup java -jar -Dapp.profile=prod /data/application/4cnconsult/4cnconsult-jingdata-converter/_4cnconsult-jingdata-converter-1.0-SNAPSHOT.jar > ./jingdata-converter.out  2>&1 &
     nohup java -jar -Dapp.profile=prod /data/application/4cnconsult/4cnconsult-itjuzi-capturer/_4cnconsult-itjuzi-capturer-1.0-SNAPSHOT.jar > ./itjuzi-capturer.out  2>&1 &
     nohup java -jar -Dapp.profile=prod /data/application/4cnconsult/4cnconsult-itjuzi-converter/_4cnconsult-itjuzi-converter-1.0-SNAPSHOT.jar > ./itjuzi-converter.out  2>&1 &   


122) bash github git repo script:
     git init
     find -name "*.sln" -o -name "*.csproj" -o -name "*.cs" -o -name "*.json" -o -name "packages.config" -o -name "App.config" -o -name "*.xaml" -o -name "Dockerfile" -o -name ".dockerignore" -o -name "NLog.*" | grep -v "/obj/" | grep -v "/bin/" | grep -v "/packages/" | xargs git add
	 git add -u
	 git remote remove origin
	 git remote add origin git@github.com:bignewbe/$(basename -- $PWD).git
	 git commit -m "first commit to git hub"
	 git push --set-upstream origin $(git branch | grep \* | cut -d ' ' -f2)
	 
	 
	 git remote add origin https://github.com/bignewbe/$(basename -- $PWD).git
	 git push -u origin master
	 

123) - find csharp code 
       find -name "*.sln" -o -name "*.csproj" -o -name "*.cs" -o -name "*.json" -o -name "packages.config" -o -name "App.config" -o -name "*.xaml" -o -name "Dockerfile" -o -name ".dockerignore" -o -name "NLog.*" | grep -v "/obj/" | grep -v "/bin/" | grep -v "/packages/" | xargs git add
	 - find document
       find -name "*.doc" -o -name "*.docx" -o -name "*.ppt" -o -name "*.pptx" -o -name "*.txt" -o -name "*.xml" -o -name "*.pdf" -o -name "*.pdf" -o -name "*.pdf" -o -name "*.pdf" -o -name "*.pdf" -o -name "*.pdf" -o -name "*.pdf" -o -name "Dockerfile" -o -name ".dockerignore" -o -name "NLog.*" | grep -v "/obj/" | grep -v "/bin/" | grep -v "/packages/" | xargs git add


124) C# 8.0 new feature
     - switch case 
	 - list range and index 
	 - 

125) zookeper, service keeper, ibeatmanager
     - beatmanager: simple functionality, to count number of heatbeat and raise heatbeat timout event
	 - client  	 

126) dotnet 
     - dotnet error like "MsBuild not found" etc can be due to version mismatch between the target version and installed version => create global.json in an upstream folder forcing enviroment to use the right version
	 - if dotnet entry complain "dotnet-blabal.dll" not found, that means .dll does not exist, check the spell error
	 - publish self contained app: dotnet publish -c Release -r win10-x64 --self-contained true
	 
127) Okex Crypto Currency trading: 
     - note that DateTime.Parse convert string to local time. currently, timestamp in ticker, candle are in local time. however, time in balance, order, position are in UTC. need to be fixed in Okex.
	   how to fix: change DateTime.Parse in Okex. and change ToLocalTime in CryptoCaptureApp (CancelOrders, Display Quote, Show Time in Screen)	   	 

     OkexSpotProxy:  
     - sync data with server as follows:
        - initialize order, balance and ticker information from dumpfile and server upon start	 
		- update order, balance and ticker information after receiving from websocket
		- polling server periodically 
		- in order not to block the socket thread, we buffer data into a queue when update order/balance/ticker 
		
	 SpotSwingFixedRatio
	    - sync local order/balance with proxy
		  - in simulation mode, we manually update this information when place/cancel order, and in order_closed event
		  - in real mode, they are updated in orderOpened/orderCancelled/orderClosed/accountBalanceUpdated event
		  - in real mode, we also periodically refresh this data
		- strategies
		  1. sell: dynamic, min profit and min ratio, buy: fixed, fixed ratios, qty: available/num		  
		  2. sell: dynamic, min rise and min ratio, buy: dynamic, min drop and min ratio, qty: available/num		  
		  3. sell: dynamic, min rise and min ratio, buy: dynamic, min drop and min ratio, or min profit, qty: one to one
		  4. sell: fixed, price delta, buy: fixed, price delta, 
		  5. sell: dynamic, above largest std, qty: available/num, buy: 		  		  
		  
	 CryptoCaptureApp:
	    data flow: messageClient (order, balance, ticker) -> OkexProxy -> SpotSwingFixedRatio -> SpotTraderVM  		
	 
		                          
128) awk:
     awk 'NR>=1 && NR<=2' test.txt > 1.txt;  //outfirst two lines to 1.txt
	 awk -F';' 'NR > 2 {$1 = $1 + 1000; print $0}' test.txt |  //semicolon as delimiter; add 1000 to first column
	 sed 's/ /;/g' >> 1.txt; mv 1.txt test.txt //change delimiter from space to semicolon
	 
     for f in `find . | grep Okex_ | grep .txt`; do echo $f; awk 'NR>=1 && NR<=2' $f > temp.txt; awk -F';' 'NR > 2 {$1 = $1 - 28800; print $0}' $f | sed 's/ /;/g' >> temp.txt; mv temp.txt $f; done	

129) dotnet and nuget restore packages:
    - restore nuget packages: 
	  for f in $(find . -type d -maxdepth 1); do f1=`realpath $f`; echo $f1; cd $f1; dotnet restore; ~/bin/nuget.exe restore; cdp; done

apikey = "be79722b-46e4-4d42-aa09-be3d73e4d715"
secretkey = "261FEAF832A272FCF961F7BE49EB3350"
IP = "47.90.96.154,47.52.248.120"
Display Name = "v3 api2"
Permissions = "Enquiry/Trade"

126) trading
     - 动手前 我告诉大家  一定确定3点   
	 1：你做好亏损的准备，知道自己的亏损承受能力，超出了不玩  
	 2：认清你准备动手的位置是半山腰还是接近山顶还是接近山底  这样你才知道你的仓位控制的比例  
	 3：到哪里止盈止损  提前想好自己为什么买  如果只是抓反弹  0.5%的收益该走就走  后面涨100%也跟你没关系 
	 4: 不要追涨，不要幻想这一次不一样。忘记过去的价格。宁可错过。
	 5： 	 
	 - 耐心，机会很多，肯定有更好的，宁可错过
	 - 
	 
127) sqlserver in docker
   server side: 
     - start sql server => docker run --restart always -d -e 'ACCEPT_EULA=Y' -e 'SA_PASSWORD=Password!' -p 1306:1433 --name sqlserver -h sqlserver mcr.microsoft.com/mssql/server:2019-latest
   client side: 
     - Server Explorer in VS Studio: add connection 'Sever Name = Ip,Port'

128) certificate : https://docs.microsoft.com/en-us/aspnet/core/security/docker-https?view=aspnetcore-2.2

    https/ssl/ certificate error :  x509: cannot validate certificate for 47.90.96.154 because it doesn't contain any IP SANs
    - blazor: var clientHandler = new HttpClientHandler(); clientHandler.ServerCertificateCustomValidationCallback = (sender, cert, chain, sslPolicyErrors) => { return true; };
    - grpcui: using "-insecure" 
    dotnet dev-certs https -ep %APPDATA%\ASP.NET\Https\TT.Core.Portal.Web.AzureHybrid.pfx -p password
    dotnet dev-certs https --trust
    dotnet user-secrets -p TT.Core.Portal.Web.AzureHybrid.csproj set "Kestrel:Certificates:Development:Password" "password"    
    https://docs.microsoft.com/en-us/aspnet/core/security/authentication/certauth?view=aspnetcore-5.0
    
    

129) entity framework
    - add-migration create
    - update-database

130) blazor 
     - when debug: start server side, the client side will be started automatically
     - 
     
131) OS installation/backup/migrate
     1. using clozilalive device-to-device/disk-to-disk copy
     2. unplug src disk otherwise, there will be conflict in disk signature
     3. using diskpart to delete recovery partition such that we can extend volume to use unallocated space
     
131) asp.net 
    - configuration
      - priority: hard-code > launchSetting/enviroment variable > appsettings.json   
     
     https://localhost:6001/.well-known/openid-configuration
     https://47.90.96.154:6001/_configuration/FZWebTrader.Client
     
     



UR cobot:
  - real time control using servoj/servoc/speedl: https://dof.robotiq.com/discussion/1255/smooth-real-time-target-update-movement-on-ur
  
  
  







这部分工作可以肢解成这样
Data Source=47.90.96.154,1306;Initial Catalog=TestDB;Persist Security Info=True;User ID=SA;Password=***********


我们公司半年目标/团队搭建/PR节奏这些以前都说过，和以前没啥不一样，主要纠结可能是杨健的可替代性以及能力方面吧。

工作大致优先级：
- 搭出几个象样的demo好拍视频 
- 招人和团队建设，为以后发展做准备。策略是一边进一边出只留下一拨能一起干事的人。曹操说的包容性多样性我是认同的。但是短期and/or长期一定要能出活帮我们。
- 之后可以更多PR
- 商业化


杨健的工作：
1. 运维(阿里云容器这些) - 他做的基本上都是我说的，东西也不多，我都可以顶上，原先也是想给他机会多学点东西。
2. 公司官网 - 这个也简单，有了效果图，找谁估计都快
3. 他之前搭的ros web端 - 稍微复杂。商业化之前都没用，他的东西离能用也还远，不影响我们短期目标；长期的话我主要怕沟通费劲事被功半，然后在我看来他能力也一般（这个和曹操看法有所不同），很多东西会但都不深，信心不太足。
4. research：虽然他自己兴趣很大，但我倒没关心他这方面的价值

所以在我看来，短期他在与不在不影响我们的目标。长期，不能说没有纠结，我偏向从市场找两个人（前端+运维）替换他，对团队能力建设可能更好。看看曹操你那边情况好不好办，留下也可以的。

昨天是想过先把评价给你你们看看，后来想想来点震动也好，所以就直接发了，效果是达到了 


1. 杨健前端和运维交接 
2. URCap开发    - 我们视觉获得UR认证的唯一途径
3. 大族对接    
4. 招人：产品经理、前端、算法、系统
5. 官网找外包做 - 薇薇
6. 租办公室     - 看看23还有没有空的
7. UR ROS代码封装  - 子峰
8. ppf集成测试     - 子峰、佳诚
9. 新框架单元测试  - 键驰 
10. ppf算法优化    - 运鑫




automapper: 
- inherit AutoMapper.Profile and create map between to class
- use ProjectTo extension method to covert type

autofac:
- register class as interface
- 



给大家整理出来 各板块龙头哈：
DEX龙头:UNI、sushi
借贷龙头：AAve、comp、MKR
聚合器龙头：1inch
聚合理财：yfi、yfii
保险:cover、wnxm
Dao龙头：Ant
衍生品龙头：SNX
数据类龙头：GRT
虚拟机龙头：Link、Api3、Band
Layer2龙头：ZRX、LRC、OMG
记住每个板块 龙头先动 其他尾随 所以玩币第一要买板块龙头强势币










